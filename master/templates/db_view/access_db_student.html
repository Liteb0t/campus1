{% extends "_base.html" %}
{% load static %}
{% block title %}
 View Timesheet
{% endblock %}
{% block content %}
{#    <div id="advanced_search">#}
{#    <form action="{% url 'access_db_student' %}">#}
{#    <label for="search_hours">hours</label>#}
{#    <input id="search_hours" name="hours" type="text" placeholder="Search...">#}
{#    <label for="search_student_id">student ID</label>#}
{#    <input id="search_student_id" name="student_id" type="text" placeholder="Search...">#}
{#    <button type="submit">Go</button>#}
{#    </form>#}
{#    </div>#}

<!-- Table Layout: Submissions -->
<div class="Row">
    <div class="Col left">
        <div id="advanced_search" class="SideBox">
            <form method="post">
                {{ StudentCreationForm.as_p }}
                <button type="submit">Create</button>
            </form>
            <div class="Pagination">
                <span class="StepLinks">
                    {% if Submissions.has_previous %}
                    <a class="PaginationLinks" href="?Submissions_page=1">&laquo; first</a>
                    <a class="PaginationLinks" href="?Submissions_page={{ Submissions.previous_page_number }}">previous</a>
                    {% endif %}
                    <span class="CurrentPage">
                        Page {{ Submissions.number }} of {{ Submissions.paginator.num_pages }}.
                    </span>
                    {% if Submissions.has_next %}
                    <a class="PaginationLinks" href="?Submissions_page={{ Submissions.next_page_number }}">next</a>
                    <a class="PaginationLinks" href="?Submissions_page={{ Submissions.paginator.num_pages }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
    <div class="Col right">
        <div class="TableBox">
            {% if Submissions|length > 0 %}
                <table id="Submissions">
                    <tr>
                        <th>Submission ID:</th>
                        <th>Hours:</th>
                        <th>Student Username:</th>
                        <th>Student First name:</th>
                        <th>Student last name:</th>
                        <th>Job ID:</th>
                        <th>Line Manager ID:</th>
                        <th>Date Worked</th>
                        <th>Date Submitted</th>
                    </tr>
                    {% for item in Submissions %}
                    <tr>
                        <td>{{ item.id }}</td>
                        <td>{{ item.hours }}</td>
                        <td>{{ item.student.username }}</td>
                        <td>{{ item.student.first_name }}</td>
                        <td>{{ item.student.last_name }}</td>
                        <td>{{ item.job_id }}</td>
                        <td>{{ item.line_manager_id }}</td>
                        <td>{{ item.date_worked }}</td>
                        <td>{{ item.date_submitted }}</td>
                    </tr>
                    {% endfor %}
                </table>
            {% else %}
                Your submissions will show up here
            {% endif %}
        </div>
    </div>
</div>

<script src="{% static 'advanced_search.js' %}"></script>
    <script>
    advanced_search = new AdvancedSearch("advanced_search", {
        "parameter_options": {
            {% for item in ValidSearchParameters %}
                "{{ item.0 }}": {"type": "{{ item.1 }}"},
            {% endfor %}
        }
        ,"form_action": "{% url 'student' %}"
    });
    </script>
{% endblock %}
